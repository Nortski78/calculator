<!Doctype html>
<head>
    <link rel="stylesheet" href="style/style.css">
</head>
<body>

    <div id="wrapper">    
        <div id="calc-container">
            <div id="calc-display-container">
                <div id="display-top"></div>
                <div id="display-main">0</div>
            </div>
            <button class="number-btn" id="btn-7">7</button>
            <button class="number-btn" id="btn-8">8</button>
            <button class="number-btn" id="btn-9">9</button>
            <button class="operator-btn" id="btn-plus">+</button>
            <button class="number-btn" id="btn-4">4</button>
            <button class="number-btn" id="btn-5">5</button>
            <button class="number-btn" id="btn-6">6</button>
            <button class="operator-btn" id="btn-minus">-</button>
            <button class="number-btn" id="btn-1">1</button>
            <button class="number-btn" id="btn-2">2</button>
            <button class="number-btn" id="btn-3">3</button>
            <button class="operator-btn" id="btn-multiply">*</button>
            <button class="number-btn" id="btn-0">0</button>
            <button class="btn" id="btn-dot">.</button>
            <button class="operator-btn" id="btn-divide">/</button>
            <button class="btn" id="btn-clear">clr</button> 
            <button class="btn" id="btn-equals">=</button> 
             
        </div>
        <button class="btn" id="btn-delete">del</button>
    </div>

</body>
</html>

<script>

let operator = "";
let firstOperand = null;
let secondOperand = null;
let clear = false;

function add(num1, num2){
    return (num1 + num2);
}

function subtract(num1, num2){
    return num1 - num2;
}

function multiply(num1, num2){
    return num1 * num2;
}

function divide(num1, num2){
    return num1 / num2;
}

function operate(operator, num1, num2){

    parseInt(num1);
    parseInt(num2);

    switch(operator){
        case "+":
            console.log(num1 + num2);
            return add(num1, num2);
            break;
        case "-":
            return subtract(num1, num2);
            break;
        case "*":
            return multiply(num1, num2);
            break;
        case "/":
            return divide(num1, num2);
            break;
    }
}

function clearDisplay(){
    mainDisplay.textContent = "";
}

function getDisplayValue(){
    return parseInt(mainDisplay.textContent);
}

function updateDisplay(digit){

    if(!isFinite(digit)){
        mainDisplay.textContent = "OOPS";
    }
    else{
        if(clear === true){
            clearDisplay();
            //mainDisplay.textContent = "";
            clear = false;
        }

        if(mainDisplay.textContent == 0){
            mainDisplay.textContent = "";
            mainDisplay.textContent = "" + mainDisplay.textContent + digit;
        }
        else{
            mainDisplay.textContent = "" + mainDisplay.textContent + digit;
        }
    }
}

function setOperand(value){

    if(firstOperand === null) { firstOperand = value; }
    else { 
        secondOperand === value;
        clear = true;
        updateDisplay(operate(operator, firstOperand, secondOperand));
        firstOperand = getDisplayValue();
    }

    console.log(firstOperand + " : " + secondOperand);
}

function resetDisplay(){
    firstOperand = null;
    secondOperand = null;
    operator = null;
    mainDisplay.textContent = 0;
}

const numberButtons = document.querySelectorAll('.number-btn');
const operatorButtons = document.querySelectorAll('.operator-btn');
const mainDisplay = document.querySelector('#display-main');
const topDisplay = document.querySelector('#display-top');
const btnEquals = document.querySelector('#btn-equals');
const btnClear = document.querySelector('#btn-clear');
const btnDot = document.querySelector('#btn-dot');
const btnDelete = document.querySelector('#btn-delete');

numberButtons.forEach((numberButton) => {
    numberButton.addEventListener('click', (event) => {
        updateDisplay(event.target.textContent);
    })
})

operatorButtons.forEach((operatorButton) => {
    operatorButton.addEventListener('click', (event) => {
        
        if(getDisplayValue() == null) {
            setOperand(getDisplayValue());
            //setOperator(event.target.textContent);
        }
        else {
            setOperand(getDisplayValue());
        }
    })
})

btnEquals.addEventListener('click', (event) => {
    result = generateResult(getDisplayValue());
    updateDisplay(result);
})

btnClear.addEventListener('click', (event) => resetDisplay());

btnDot.addEventListener('click', (event) => {
    displayValue(event.target.textContent);
})

btnDelete.addEventListener('click', (event) => {
    const currentDisplayValue = getDisplayValue();
    console.log(typeof currentDisplayValue);

    let updatedDisplayValue = currentDisplayValue.toString();

    updatedDisplayValue = updatedDisplayValue.split("");

    if(updatedDisplayValue.length === 1){
        updatedDisplayValue[0] = 0;
        clearDisplay();
        updateDisplay(updatedDisplayValue[0]);
    }
    else{
        updatedDisplayValue.pop();
        updatedDisplayValue = updatedDisplayValue.join("");
        clearDisplay();
        updateDisplay(updatedDisplayValue);
    }
})

</script>