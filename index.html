<!Doctype html>
<head>
    <link rel="stylesheet" href="style/style.css">
</head>
<body>

    <div id="wrapper">    
        <div id="calc-container">
            <div id="calc-display-container">
                <div id="display-top"></div>
                <div id="display-main">0</div>
            </div>
            <button class="number-btn" id="btn-7">7</button>
            <button class="number-btn" id="btn-8">8</button>
            <button class="number-btn" id="btn-9">9</button>
            <button class="operator-btn" id="btn-plus">+</button>
            <button class="number-btn" id="btn-4">4</button>
            <button class="number-btn" id="btn-5">5</button>
            <button class="number-btn" id="btn-6">6</button>
            <button class="operator-btn" id="btn-minus">-</button>
            <button class="number-btn" id="btn-1">1</button>
            <button class="number-btn" id="btn-2">2</button>
            <button class="number-btn" id="btn-3">3</button>
            <button class="operator-btn" id="btn-multiply">*</button>
            <button class="number-btn" id="btn-0">0</button>
            <button class="btn" id="btn-dot">.</button>
            <button class="operator-btn" id="btn-divide">/</button>
            <button class="btn" id="btn-clear">clr</button> 
            <button class="btn" id="btn-equals">=</button> 
        </div>
    </div>

</body>
</html>

<script>

let clearScreen = false;
let operator = null;
let firstOperand = null;
let secondOperand = null;

function add(num1, num2){
    return num1 + num2;
}

function subtract(num1, num2){
    return num1 - num2;
}

function multiply(num1, num2){
    return num1 * num2;
}

function divide(num1, num2){
    return num1 / num2;
}

function operate(operator, num1, num2){

    console.log("Operator is: " + operator);

    switch(operator){
        case "+":
            console.log("case +");
            return add(num1, num2);
            break;
        case "-":
            return subtract(num1, num2);
            break;
        case "*":
            return multiply(num1, num2);
            break;
        case "/":
            return divide(num1, num2);
            break;
    }
}


function updateDisplay(digit){

    if(!isFinite(digit)){
        mainDisplay.textContent = "OOPS";
    }
    else{
        if(clearScreen === true){
            mainDisplay.textContent = "";
            clearScreen = false;
        }

        if(mainDisplay.textContent == 0){
            mainDisplay.textContent = "";
            mainDisplay.textContent = "" + mainDisplay.textContent + digit;
        }
        else{
            mainDisplay.textContent = "" + mainDisplay.textContent + digit;
        }
    }
}

function displayValue(digit){
    updateDisplay(digit);
}

function setOperator(digit){
    operator = digit;
}

function getDisplayValue(){
    return parseInt(mainDisplay.textContent);
}

function setOperand(operand){

    operand = parseInt(operand);

    if(firstOperand === null) { firstOperand = operand; }
    else { 
        secondOperand = operand;
        clearScreen = true;
        updateDisplay(operate(operator, firstOperand, secondOperand));
        firstOperand = getDisplayValue();
    }
}

function generateResult(value){
    secondOperand = value;
    console.log(firstOperand, operator, secondOperand);
    return operate(operator, firstOperand, secondOperand);
}

function resetDisplay(){
    firstOperand = null;
    secondOperand = null;
    operator = null;
    mainDisplay.textContent = 0;
}

const numberButtons = document.querySelectorAll('.number-btn');
const operatorButtons = document.querySelectorAll('.operator-btn');
const mainDisplay = document.querySelector('#display-main');
const topDisplay = document.querySelector('#display-top');
const btnEquals = document.querySelector('#btn-equals');
const btnClear = document.querySelector('#btn-clear');
const btnDot = document.querySelector('#btn-dot');

numberButtons.forEach((numberButton) => {
    numberButton.addEventListener('click', (event) => {
        displayValue(event.target.textContent);
    })
})

operatorButtons.forEach((operatorButton) => {
    operatorButton.addEventListener('click', (event) => {
        setOperand(getDisplayValue());
        setOperator(event.target.textContent);        
        clearScreen = true;
    })
})

btnEquals.addEventListener('click', (event) => {
    result = generateResult(getDisplayValue());
    clearScreen = true;
    updateDisplay(result);
})

btnClear.addEventListener('click', (event) => resetDisplay());

btnDot.addEventListener('click', (event) => {
    displayValue(event.target.textContent);
})

</script>